<!-- -*- mode: HTML; tab-width: 2; indent-tabs-mode: nil; -*- -->
<!-- vim: set tabstop=2 expandtab shiftwidth=2 textwidth=80:  -->
<!DOCTYPE html>
<html class="reftest-wait">
  <head>
    <title>Text</title>
    <!-- Copyright (c) 2011-2015 MathJax Consortium, Inc.
         License: Apache License 2.0 -->
    <!-- This is an example from the doc -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script type="text/javascript" src="../../header.js"></script>
    <script type="text/javascript" src="../../scriptTests.js"></script>

    <script type="text/javascript">
      var r1 = false, r2 = false, r3 = false;

      function f()
      {
      r1 = true;
      r3 = (document.getElementById("div").offsetWidth > 150);
      }

      function postMathJax() 
      {
      r2 = (document.getElementById("div").offsetWidth < 150);

      var math = MathJax.Hub.getAllJax("div")[0];
      var newMath = "<math><mspace width=\"200px\" height=\"10px\" mathbackground=\"red\"></mspace></math>";
      MathJax.Hub.Queue(["Text", math, newMath, f]);
      }

      function getTestCases()
      {
      return [
      newScriptReftestResult("Text(nexMath, f): Callback is called", r1),
      newScriptReftestResult("Before change: div width < 150",
                             r2),
      newScriptReftestResult("After change and reprocess: div width > 150",
                             r3)
      ];
      }
    </script>

  </head>

  <body>

    <div id="div" style="display: inline-block;">
      <math>
        <mspace width="100px" height="10px" mathbackground="blue"></mspace>
      </math>
    </div>    

  </body>
</html>
